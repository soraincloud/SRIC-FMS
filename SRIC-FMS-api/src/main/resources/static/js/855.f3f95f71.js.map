{"version":3,"file":"js/855.f3f95f71.js","mappings":"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","sources":["webpack://front/./src/components/SignUpCard.vue?52d6","webpack://front/./src/components/SignUpCard.vue","webpack://front/./src/components/SignUpCard.vue?a6a5","webpack://front/./src/views/user/SignUp.vue?65b7","webpack://front/./src/views/user/SignUp.vue","webpack://front/./src/views/user/SignUp.vue?bf77"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { slot: \"label\" }\nconst _hoisted_2 = { slot: \"label\" }\nconst _hoisted_3 = { slot: \"label\" }\nconst _hoisted_4 = { slot: \"label\" }\nconst _hoisted_5 = { slot: \"label\" }\nconst _hoisted_6 = { class: \"SignInCard-new-alarm-span\" }\n\nimport { ref,reactive } from 'vue'\r\nimport { getCodeByMail,signUp } from '@/axios/api/user';\r\nimport { ElMessage } from 'element-plus'\r\nimport CryptoJS from 'crypto-js' //SHA-256加密\r\nimport { useRouter } from \"vue-router\";\r\nimport type { FormInstance } from 'element-plus'\r\nimport i18n from '@/language';\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SignUpCard',\n  setup(__props) {\n\r\nconst { t } = i18n.global\r\n\r\nconst router = useRouter()\r\n\r\nconst isSendCodeLoading = ref(false) //发送验证码按钮是否正在加载\r\nconst isDisabled = ref(false) //发送验证码按钮是否为倒计时\r\nconst timeCounting = ref(\"60\") //发送验证码倒计时初始值\r\n\r\nconst signUpForm = reactive //登录信息表单\r\n({\r\n    username: '',\r\n    password: '',\r\n    passwordRepeat: '',\r\n    mail: '',\r\n    code: '',\r\n})\r\n\r\nconst signUpFormRef = ref<FormInstance>() //注册信息表单的ref\r\n\r\nconst signUpFormRules = reactive //注册信息表单的rule\r\n({\r\n    username:\r\n    [\r\n        { required: true, message: t(\"rules.username\"), trigger: 'blur' },\r\n    ],\r\n    password:\r\n    [\r\n        { required: true, message: t(\"rules.password\"), trigger: 'blur' },\r\n    ],\r\n    passwordRepeat:\r\n    [\r\n        { required: true, message: t(\"rules.passwordRepeat\"), trigger: 'blur' },\r\n    ],\r\n    mail:\r\n    [\r\n        { required: true, message: t(\"rules.mail\"), trigger: 'blur' },\r\n\t\t{ type: 'email', message: t(\"rules.mailConfirm\"), trigger: 'blur' },\r\n    ],\r\n    code:\r\n    [\r\n        { required: true, message: t(\"rules.code\"), trigger: 'blur' },\r\n    ],\r\n})\r\n\r\nconst doSendCodeRequest = async () => //发送验证码请求\r\n{\r\n    const resp = await getCodeByMail({ mail: signUpForm.mail })\r\n    if(resp.data.code == 200)\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.sendSuccess\"),\r\n            type: 'success',\r\n        })\r\n        setMailTimeout()\r\n        isSendCodeLoading.value = false\r\n    }\r\n    else if(resp.data.code == 400)\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.mailHasBeenUsed\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n    else\r\n    {\r\n        ElMessage({\r\n            message: t(\"static.paramsError\"),\r\n            type: 'error',\r\n        })\r\n    }\r\n}\r\n\r\nconst setMailTimeout = () => //设置按钮冷却时间\r\n{\r\n    let timeLeft = 60\r\n    isDisabled.value = true\r\n    timeCounting.value = `${timeLeft}`\r\n\r\n    const timer = setInterval(() => \r\n    {\r\n        timeLeft--\r\n        timeCounting.value = `${timeLeft}`\r\n        if(timeLeft <= 0)\r\n        {\r\n            clearInterval(timer)\r\n            isDisabled.value = false\r\n            timeCounting.value = \"60\"\r\n        }\r\n    }, 1000)\r\n}\r\n\r\nconst clickSendCode = () => //点击发送验证码\r\n{\r\n    const mailCheck = /^([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})$/\r\n    if(mailCheck.test(signUpForm.mail)) //邮箱合法\r\n    {\r\n        doSendCodeRequest()\r\n        isSendCodeLoading.value = true\r\n    }\r\n    else\r\n    {\r\n        ElMessage({\r\n            message: t(\"rules.mailConfirm\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n}\r\n\r\nconst doSignUpRequest = async () => //发送注册请求\r\n{\r\n    let passwordHash = CryptoJS.HmacSHA256(signUpForm.password,\"SRIC\") //使用SHA-256进行哈希运算\r\n    let passwordHashString = CryptoJS.enc.Hex.stringify(passwordHash) //将哈希运算的结果进行16进制编码\r\n    const params =\r\n    {\r\n        username: signUpForm.username,\r\n        password: passwordHashString,\r\n        mail: signUpForm.mail,\r\n        code: signUpForm.code,\r\n    }\r\n    const resp = await signUp(params)\r\n    if(resp.data.code == 200) //注册成功\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.successSignUpMessage\"),\r\n            type: 'success',\r\n        })\r\n        router.push(\"SignIn\")\r\n    }\r\n    else if(resp.data.code == 400) //用户名已被注册\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.usernameHasBeenUsedMessage\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n    else if(resp.data.code == 401) //验证码错误\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.wrongCodeMessage\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n    else\r\n    {\r\n        ElMessage({\r\n            message: t(\"static.paramsError\"),\r\n            type: 'error',\r\n        })\r\n    }\r\n}\r\n\r\nconst clickSignUp = async (formEl: FormInstance | undefined) => //点击注册\r\n{\r\n    if (!formEl) return\r\n    await formEl.validate((valid, fields) => {\r\n        if (valid) {\r\n            if(signUpForm.password == signUpForm.passwordRepeat)\r\n            {\r\n                doSignUpRequest()\r\n            }\r\n            else\r\n            {\r\n                ElMessage({\r\n                    message: t(\"sign.passwordCommon\"),\r\n                    type: 'warning',\r\n                })\r\n            }\r\n        } else {\r\n            console.log('error submit!', fields)\r\n        }\r\n    })\r\n}\r\n\r\nconst clickSignIn = () => //点击跳转到登录\r\n{\r\n    router.push(\"SignIn\")\r\n}\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_input = _resolveComponent(\"el-input\")!\n  const _component_el_form_item = _resolveComponent(\"el-form-item\")!\n  const _component_el_button = _resolveComponent(\"el-button\")!\n  const _component_el_form = _resolveComponent(\"el-form\")!\n  const _component_el_divider = _resolveComponent(\"el-divider\")!\n  const _component_el_card = _resolveComponent(\"el-card\")!\n\n  return (_openBlock(), _createBlock(_component_el_card, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_el_form, {\n        ref_key: \"signUpFormRef\",\n        ref: signUpFormRef,\n        model: signUpForm,\n        rules: signUpFormRules\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_el_form_item, { prop: \"username\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"span\", _hoisted_1, _toDisplayString(_ctx.$t(\"sign.username\")), 1),\n              _createVNode(_component_el_input, {\n                modelValue: signUpForm.username,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((signUpForm.username) = $event)),\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { prop: \"password\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"span\", _hoisted_2, _toDisplayString(_ctx.$t(\"sign.password\")), 1),\n              _createVNode(_component_el_input, {\n                modelValue: signUpForm.password,\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((signUpForm.password) = $event)),\n                type: \"password\",\n                \"show-password\": \"\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { prop: \"passwordRepeat\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.$t(\"sign.repeatPassword\")), 1),\n              _createVNode(_component_el_input, {\n                modelValue: signUpForm.passwordRepeat,\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((signUpForm.passwordRepeat) = $event)),\n                type: \"password\",\n                \"show-password\": \"\",\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { prop: \"mail\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"span\", _hoisted_4, _toDisplayString(_ctx.$t(\"user.mail\")), 1),\n              _createVNode(_component_el_input, {\n                modelValue: signUpForm.mail,\n                \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((signUpForm.mail) = $event)),\n                clearable: \"\"\n              }, null, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, { prop: \"code\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_ctx.$t(\"sign.code\")), 1),\n              _createVNode(_component_el_input, {\n                modelValue: signUpForm.code,\n                \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((signUpForm.code) = $event)),\n                clearable: \"\"\n              }, {\n                append: _withCtx(() => [\n                  (!isDisabled.value)\n                    ? (_openBlock(), _createBlock(_component_el_button, {\n                        key: 0,\n                        onClick: clickSendCode,\n                        loading: isSendCodeLoading.value\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(_ctx.$t(\"sign.sendCode\")), 1)\n                        ]),\n                        _: 1\n                      }, 8, [\"loading\"]))\n                    : _createCommentVNode(\"\", true),\n                  (isDisabled.value)\n                    ? (_openBlock(), _createBlock(_component_el_button, {\n                        key: 1,\n                        disabled: \"\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(timeCounting.value) + \" S\", 1)\n                        ]),\n                        _: 1\n                      }))\n                    : _createCommentVNode(\"\", true)\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_el_form_item, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_button, {\n                onClick: _cache[5] || (_cache[5] = ($event: any) => (clickSignUp(signUpFormRef.value))),\n                type: \"success\",\n                style: {\"width\":\"100%\"}\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(_ctx.$t(\"common.signup\")), 1)\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }, 8, [\"model\", \"rules\"]),\n      _createVNode(_component_el_divider),\n      _createElementVNode(\"div\", null, [\n        _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.$t(\"static.alreadyHave\")), 1),\n        _createVNode(_component_el_button, {\n          onClick: clickSignIn,\n          class: \"SignInCard-more-button\",\n          type: \"primary\",\n          link: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createTextVNode(_toDisplayString(_ctx.$t(\"common.signin\")), 1)\n          ]),\n          _: 1\n        })\n      ])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\r\n    <el-card>\r\n        <el-form ref=\"signUpFormRef\" :model=\"signUpForm\" :rules=\"signUpFormRules\">\r\n            <el-form-item prop=\"username\">\r\n                <span slot=\"label\">\r\n                    {{ $t(\"sign.username\") }}\r\n                </span>\r\n                <el-input v-model=\"signUpForm.username\" clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"password\">\r\n                <span slot=\"label\">\r\n                    {{ $t(\"sign.password\") }}\r\n                </span>\r\n                <el-input v-model=\"signUpForm.password\" type=\"password\" show-password clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"passwordRepeat\">\r\n                <span slot=\"label\">\r\n                    {{ $t(\"sign.repeatPassword\") }}\r\n                </span>\r\n                <el-input v-model=\"signUpForm.passwordRepeat\" type=\"password\" show-password clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"mail\">\r\n                <span slot=\"label\">\r\n                    {{ $t(\"user.mail\") }}\r\n                </span>\r\n                <el-input v-model=\"signUpForm.mail\" clearable></el-input>\r\n            </el-form-item>\r\n            <el-form-item prop=\"code\">\r\n                <span slot=\"label\">\r\n                    {{ $t(\"sign.code\") }}\r\n                </span>\r\n                <el-input v-model=\"signUpForm.code\" clearable>\r\n                    <template #append>\r\n                        <el-button v-if=\"!isDisabled\" @click=\"clickSendCode\" :loading=\"isSendCodeLoading\">{{ $t(\"sign.sendCode\") }}</el-button>\r\n                        <el-button v-if=\"isDisabled\" disabled>{{ timeCounting }} S</el-button>\r\n                    </template>\r\n                </el-input>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                <el-button @click=\"clickSignUp(signUpFormRef)\" type=\"success\" style=\"width: 100%;\">{{ $t(\"common.signup\") }}</el-button>\r\n            </el-form-item>\r\n        </el-form>\r\n        <el-divider></el-divider>\r\n        <div>\r\n            <span class=\"SignInCard-new-alarm-span\">{{ $t(\"static.alreadyHave\") }}</span>\r\n            <el-button @click=\"clickSignIn\" class=\"SignInCard-more-button\" type=\"primary\" link>{{ $t(\"common.signin\") }}</el-button>\r\n        </div>\r\n    </el-card>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref,reactive } from 'vue'\r\nimport { getCodeByMail,signUp } from '@/axios/api/user';\r\nimport { ElMessage } from 'element-plus'\r\nimport CryptoJS from 'crypto-js' //SHA-256加密\r\nimport { useRouter } from \"vue-router\";\r\nimport type { FormInstance } from 'element-plus'\r\nimport i18n from '@/language';\r\n\r\nconst { t } = i18n.global\r\n\r\nconst router = useRouter()\r\n\r\nconst isSendCodeLoading = ref(false) //发送验证码按钮是否正在加载\r\nconst isDisabled = ref(false) //发送验证码按钮是否为倒计时\r\nconst timeCounting = ref(\"60\") //发送验证码倒计时初始值\r\n\r\nconst signUpForm = reactive //登录信息表单\r\n({\r\n    username: '',\r\n    password: '',\r\n    passwordRepeat: '',\r\n    mail: '',\r\n    code: '',\r\n})\r\n\r\nconst signUpFormRef = ref<FormInstance>() //注册信息表单的ref\r\n\r\nconst signUpFormRules = reactive //注册信息表单的rule\r\n({\r\n    username:\r\n    [\r\n        { required: true, message: t(\"rules.username\"), trigger: 'blur' },\r\n    ],\r\n    password:\r\n    [\r\n        { required: true, message: t(\"rules.password\"), trigger: 'blur' },\r\n    ],\r\n    passwordRepeat:\r\n    [\r\n        { required: true, message: t(\"rules.passwordRepeat\"), trigger: 'blur' },\r\n    ],\r\n    mail:\r\n    [\r\n        { required: true, message: t(\"rules.mail\"), trigger: 'blur' },\r\n\t\t{ type: 'email', message: t(\"rules.mailConfirm\"), trigger: 'blur' },\r\n    ],\r\n    code:\r\n    [\r\n        { required: true, message: t(\"rules.code\"), trigger: 'blur' },\r\n    ],\r\n})\r\n\r\nconst doSendCodeRequest = async () => //发送验证码请求\r\n{\r\n    const resp = await getCodeByMail({ mail: signUpForm.mail })\r\n    if(resp.data.code == 200)\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.sendSuccess\"),\r\n            type: 'success',\r\n        })\r\n        setMailTimeout()\r\n        isSendCodeLoading.value = false\r\n    }\r\n    else if(resp.data.code == 400)\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.mailHasBeenUsed\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n    else\r\n    {\r\n        ElMessage({\r\n            message: t(\"static.paramsError\"),\r\n            type: 'error',\r\n        })\r\n    }\r\n}\r\n\r\nconst setMailTimeout = () => //设置按钮冷却时间\r\n{\r\n    let timeLeft = 60\r\n    isDisabled.value = true\r\n    timeCounting.value = `${timeLeft}`\r\n\r\n    const timer = setInterval(() => \r\n    {\r\n        timeLeft--\r\n        timeCounting.value = `${timeLeft}`\r\n        if(timeLeft <= 0)\r\n        {\r\n            clearInterval(timer)\r\n            isDisabled.value = false\r\n            timeCounting.value = \"60\"\r\n        }\r\n    }, 1000)\r\n}\r\n\r\nconst clickSendCode = () => //点击发送验证码\r\n{\r\n    const mailCheck = /^([a-zA-Z0-9._%+-]+)@([a-zA-Z0-9.-]+\\.[a-zA-Z]{2,})$/\r\n    if(mailCheck.test(signUpForm.mail)) //邮箱合法\r\n    {\r\n        doSendCodeRequest()\r\n        isSendCodeLoading.value = true\r\n    }\r\n    else\r\n    {\r\n        ElMessage({\r\n            message: t(\"rules.mailConfirm\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n}\r\n\r\nconst doSignUpRequest = async () => //发送注册请求\r\n{\r\n    let passwordHash = CryptoJS.HmacSHA256(signUpForm.password,\"SRIC\") //使用SHA-256进行哈希运算\r\n    let passwordHashString = CryptoJS.enc.Hex.stringify(passwordHash) //将哈希运算的结果进行16进制编码\r\n    const params =\r\n    {\r\n        username: signUpForm.username,\r\n        password: passwordHashString,\r\n        mail: signUpForm.mail,\r\n        code: signUpForm.code,\r\n    }\r\n    const resp = await signUp(params)\r\n    if(resp.data.code == 200) //注册成功\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.successSignUpMessage\"),\r\n            type: 'success',\r\n        })\r\n        router.push(\"SignIn\")\r\n    }\r\n    else if(resp.data.code == 400) //用户名已被注册\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.usernameHasBeenUsedMessage\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n    else if(resp.data.code == 401) //验证码错误\r\n    {\r\n        ElMessage({\r\n            message: t(\"sign.wrongCodeMessage\"),\r\n            type: 'warning',\r\n        })\r\n    }\r\n    else\r\n    {\r\n        ElMessage({\r\n            message: t(\"static.paramsError\"),\r\n            type: 'error',\r\n        })\r\n    }\r\n}\r\n\r\nconst clickSignUp = async (formEl: FormInstance | undefined) => //点击注册\r\n{\r\n    if (!formEl) return\r\n    await formEl.validate((valid, fields) => {\r\n        if (valid) {\r\n            if(signUpForm.password == signUpForm.passwordRepeat)\r\n            {\r\n                doSignUpRequest()\r\n            }\r\n            else\r\n            {\r\n                ElMessage({\r\n                    message: t(\"sign.passwordCommon\"),\r\n                    type: 'warning',\r\n                })\r\n            }\r\n        } else {\r\n            console.log('error submit!', fields)\r\n        }\r\n    })\r\n}\r\n\r\nconst clickSignIn = () => //点击跳转到登录\r\n{\r\n    router.push(\"SignIn\")\r\n}\r\n</script>\r\n\r\n<style>\r\n.SignInCard-new-alarm-span\r\n{\r\n    font-size: 14px;\r\n}\r\n\r\n.SignInCard-more-button\r\n{\r\n    float: right;\r\n}\r\n</style>","import script from \"./SignUpCard.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./SignUpCard.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./SignUpCard.vue?vue&type=style&index=0&id=57712df8&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, normalizeStyle as _normalizeStyle, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment } from \"vue\"\n\nconst _hoisted_1 = { key: 0 }\nconst _hoisted_2 = { key: 1 }\nconst _hoisted_3 = { class: \"sign-in-hide-title-div\" }\nconst _hoisted_4 = { class: \"sign-in-hide-title-h1\" }\n\nimport { ref } from 'vue'\r\nimport SignUpCard from '@/components/SignUpCard.vue'\r\n\r\n\nexport default /*#__PURE__*/_defineComponent({\n  __name: 'SignUp',\n  setup(__props) {\n\r\nconst textMarginTop = ref(\"margin-top:\" + (window.innerHeight/2 - 100) + \"px;\") //右侧文字上方距离\r\nconst cardMarginTop = ref(\"margin-top:\" + (window.innerHeight/2 - 350) + \"px;\") //左侧卡片上方距离\r\nconst isHide = ref(false) //是否折叠\r\n\r\nconst windowSizeChanged = () => //窗口大小变化\r\n{\r\n    textMarginTop.value = \"margin-top:\" + (window.innerHeight/2 - 100) + \"px;\"\r\n    cardMarginTop.value = \"margin-top:\" + (window.innerHeight/2 - 350) + \"px;\"\r\n    if(window.innerWidth < 800) //在窗口过小时折叠\r\n    {\r\n        isHide.value = true\r\n    }\r\n    else\r\n    {\r\n        isHide.value = false\r\n    }\r\n}\r\n\r\nwindowSizeChanged() //初始化时设置组件位置一次\r\n\r\nwindow.addEventListener('resize',windowSizeChanged) //监听窗口变动\r\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_el_col = _resolveComponent(\"el-col\")!\n  const _component_el_row = _resolveComponent(\"el-row\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    (!isHide.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createVNode(_component_el_row, null, {\n            default: _withCtx(() => [\n              _createVNode(_component_el_col, { span: 3 }),\n              _createVNode(_component_el_col, { span: 8 }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", {\n                    style: _normalizeStyle(cardMarginTop.value)\n                  }, [\n                    _createVNode(SignUpCard)\n                  ], 4)\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_el_col, { span: 4 }),\n              _createVNode(_component_el_col, { span: 7 }, {\n                default: _withCtx(() => [\n                  _createElementVNode(\"div\", {\n                    style: _normalizeStyle(textMarginTop.value)\n                  }, [\n                    _createElementVNode(\"h1\", null, _toDisplayString(_ctx.$t(\"static.signupTitle\")), 1)\n                  ], 4)\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_el_col, { span: 2 })\n            ]),\n            _: 1\n          })\n        ]))\n      : _createCommentVNode(\"\", true),\n    (isHide.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"div\", _hoisted_3, [\n            _createElementVNode(\"h1\", _hoisted_4, _toDisplayString(_ctx.$t(\"static.signinTitle\")), 1)\n          ]),\n          _createElementVNode(\"div\", null, [\n            _createVNode(SignUpCard, { class: \"sign-in-hide-card\" })\n          ])\n        ]))\n      : _createCommentVNode(\"\", true)\n  ], 64))\n}\n}\n\n})","<template>\r\n    <div v-if=\"!isHide\">\r\n        <el-row>\r\n            <el-col :span=\"3\"></el-col>\r\n            <el-col :span=\"8\">\r\n                <div :style=\"cardMarginTop\">\r\n                    <sign-up-card></sign-up-card>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"4\"></el-col>\r\n            <el-col :span=\"7\">\r\n                <div :style=\"textMarginTop\">\r\n                    <h1>{{ $t(\"static.signupTitle\") }}</h1>\r\n                </div>\r\n            </el-col>\r\n            <el-col :span=\"2\"></el-col>\r\n        </el-row>\r\n    </div>\r\n    <div v-if=\"isHide\">\r\n        <div class=\"sign-in-hide-title-div\">\r\n            <h1 class=\"sign-in-hide-title-h1\">{{ $t(\"static.signinTitle\") }}</h1>\r\n        </div>\r\n        <div>\r\n            <sign-up-card class=\"sign-in-hide-card\"></sign-up-card>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref } from 'vue'\r\nimport SignUpCard from '@/components/SignUpCard.vue'\r\n\r\nconst textMarginTop = ref(\"margin-top:\" + (window.innerHeight/2 - 100) + \"px;\") //右侧文字上方距离\r\nconst cardMarginTop = ref(\"margin-top:\" + (window.innerHeight/2 - 350) + \"px;\") //左侧卡片上方距离\r\nconst isHide = ref(false) //是否折叠\r\n\r\nconst windowSizeChanged = () => //窗口大小变化\r\n{\r\n    textMarginTop.value = \"margin-top:\" + (window.innerHeight/2 - 100) + \"px;\"\r\n    cardMarginTop.value = \"margin-top:\" + (window.innerHeight/2 - 350) + \"px;\"\r\n    if(window.innerWidth < 800) //在窗口过小时折叠\r\n    {\r\n        isHide.value = true\r\n    }\r\n    else\r\n    {\r\n        isHide.value = false\r\n    }\r\n}\r\n\r\nwindowSizeChanged() //初始化时设置组件位置一次\r\n\r\nwindow.addEventListener('resize',windowSizeChanged) //监听窗口变动\r\n</script>\r\n\r\n<style>\r\n@import '@/css/common.css';\r\n\r\n.sign-in-hide-title-div\r\n{\r\n    margin-bottom: 30px;\r\n}\r\n\r\n.sign-in-hide-title-h1\r\n{\r\n    text-align: center;\r\n}\r\n\r\n.sign-in-hide-card\r\n{\r\n    width: 300px;\r\n    display: block;\r\n    margin: auto;\r\n}\r\n</style>","import script from \"./SignUp.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./SignUp.vue?vue&type=script&lang=ts&setup=true\"\n\nimport \"./SignUp.vue?vue&type=style&index=0&id=0fc65b09&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["_hoisted_1","slot","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","class","_defineComponent","__name","setup","__props","t","i18n","global","router","useRouter","isSendCodeLoading","ref","isDisabled","timeCounting","signUpForm","reactive","username","password","passwordRepeat","mail","code","signUpFormRef","signUpFormRules","required","message","trigger","type","doSendCodeRequest","async","resp","getCodeByMail","data","ElMessage","setMailTimeout","value","timeLeft","timer","setInterval","clearInterval","clickSendCode","mailCheck","test","doSignUpRequest","passwordHash","CryptoJS","passwordHashString","Hex","stringify","params","signUp","push","clickSignUp","formEl","validate","valid","fields","console","log","clickSignIn","_ctx","_cache","_component_el_input","_resolveComponent","_component_el_form_item","_component_el_button","_component_el_form","_component_el_divider","_component_el_card","_openBlock","_createBlock","default","_withCtx","_createVNode","ref_key","model","rules","prop","_createElementVNode","_toDisplayString","$t","modelValue","$event","clearable","_","append","_createCommentVNode","key","onClick","loading","_createTextVNode","disabled","style","link","__exports__","textMarginTop","window","innerHeight","cardMarginTop","isHide","windowSizeChanged","innerWidth","addEventListener","_component_el_col","_component_el_row","_createElementBlock","_Fragment","span","_normalizeStyle","SignUpCard"],"sourceRoot":""}